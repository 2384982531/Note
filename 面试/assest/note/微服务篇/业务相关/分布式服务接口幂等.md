> **面试官：**分布式服务的接口幂等性如何设计？
>
> **候选人：**
>
> 嗯，我们当时有一个xx项目的下单操作，采用的token+redis实现的，流程是这样的
>
> 第一次请求，也就是用户打开了商品详情页面，我们会发起一个请求，在后台生成一个唯一token存入redis，key就是用户的id，value就是这个token，同时把这个token返回前端
>
> 第二次请求，当用户点击了下单操作会后，会携带之前的token，后台先到redis进行验证，如果存在token，可以执行业务，同时删除token；如果不存在，则直接返回，不处理业务，就保证了同一个token只处理一次业务，就保证了幂等性