> 
>
> **面试官**：RabbitMQ消息的重复消费问题如何解决的
>
> **候选人**：
>
> 嗯，这个我们还真遇到过，是这样的，我们当时消费者是设置了自动确认机制，当服务还没来得及给MQ确认的时候，服务宕机了，导致服务重启之后，又消费了一次消息。这样就重复消费了
>
> 因为我们当时处理的支付（订单|业务唯一标识），它有一个业务的唯一标识，我们再处理消息时，先到数据库查询一下，这个数据是否存在，如果不存在，说明没有处理过，这个时候就可以正常处理这个消息了。如果已经存在这个数据了，就说明消息重复消费了，我们就不需要再消费了
>
> **面试官**：那你还知道其他的解决方案吗？
>
> **候选人**：
>
> 嗯，我想想~
>
> 其实这个就是典型的幂等的问题，比如，redis分布式锁、数据库的锁都是可以的